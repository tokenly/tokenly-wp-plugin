!function(){var e={7484:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",i="minute",o="hour",s="day",a="week",c="month",u="quarter",l="year",d="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,s=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:l,w:a,d:s,D:d,h:o,m:i,s:r,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",b={};b[g]=m;var w=function(e){return e instanceof C},_=function(e,t,n){var r;if(!e)return g;if("string"==typeof e)b[e]&&(r=e),t&&(b[e]=t,r=e);else{var i=e.name;b[i]=e,r=i}return!n&&r&&(g=r),r||!n&&g},E=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new C(n)},S=v;S.l=_,S.i=w,S.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=_(e.locale,null,!0),this.parse(e)}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return S},y.isValid=function(){return!(this.$d.toString()===h)},y.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return E(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<E(e)},y.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,u=!!S.u(t)||t,h=S.p(e),p=function(e,t){var r=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return u?r:r.endOf(s)},f=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,y=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case l:return u?p(1,0):p(31,11);case c:return u?p(1,y):p(0,y+1);case a:var b=this.$locale().weekStart||0,w=(m<b?m+7:m)-b;return p(u?v-w:v+(6-w),y);case s:case d:return f(g+"Hours",0);case o:return f(g+"Minutes",1);case i:return f(g+"Seconds",2);case r:return f(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var a,u=S.p(e),h="set"+(this.$u?"UTC":""),p=(a={},a[s]=h+"Date",a[d]=h+"Date",a[c]=h+"Month",a[l]=h+"FullYear",a[o]=h+"Hours",a[i]=h+"Minutes",a[r]=h+"Seconds",a[n]=h+"Milliseconds",a)[u],f=u===s?this.$D+(t-this.$W):t;if(u===c||u===l){var m=this.clone().set(d,1);m.$d[p](f),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[S.p(e)]()},y.add=function(n,u){var d,h=this;n=Number(n);var p=S.p(u),f=function(e){var t=E(h);return S.w(t.date(t.date()+Math.round(e*n)),h)};if(p===c)return this.set(c,this.$M+n);if(p===l)return this.set(l,this.$y+n);if(p===s)return f(1);if(p===a)return f(7);var m=(d={},d[i]=e,d[o]=t,d[r]=1e3,d)[p]||1,y=this.$d.getTime()+n*m;return S.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),o=this.$H,s=this.$m,a=this.$M,c=n.weekdays,u=n.months,l=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},d=function(e){return S.s(o%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:S.s(a+1,2,"0"),MMM:l(n.monthsShort,a,u,3),MMMM:l(u,a),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:S.s(o,2,"0"),h:d(1),hh:d(2),a:p(o,s,!0),A:p(o,s,!1),m:String(s),mm:S.s(s,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:i};return r.replace(f,(function(e,t){return t||m[e]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,d,h){var p,f=S.p(d),m=E(n),y=(m.utcOffset()-this.utcOffset())*e,v=this-m,g=S.m(this,m);return g=(p={},p[l]=g/12,p[c]=g,p[u]=g/3,p[a]=(v-y)/6048e5,p[s]=(v-y)/864e5,p[o]=v/t,p[i]=v/e,p[r]=v/1e3,p)[f]||v,h?g:S.a(g)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=_(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return S.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),P=C.prototype;return E.prototype=P,[["$ms",n],["$s",r],["$m",i],["$H",o],["$W",s],["$M",c],["$y",l],["$D",d]].forEach((function(e){P[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,C,E),e.$i=!0),E},E.locale=_,E.isDayjs=w,E.unix=function(e){return E(1e3*e)},E.en=b[g],E.Ls=b,E.p={},E}()},5659:function(e,t,n){var r;"undefined"!=typeof self&&self,e.exports=(r=n(9196),(()=>{"use strict";var e={131:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useAllInjections=t.useOptionalInjection=t.useInjection=t.useContainer=void 0;var r=n(888),i=n(838);function o(e){var t,n,o=r.useContext(i.InversifyReactContext);if(!o)throw new Error("Cannot find Inversify container on React Context. `Provider` component is missing in component tree.");return e?(t=function(){return e(o)},(n=r.useRef()).current||(n.current={v:t()}),n.current.v):o}t.useContainer=o,t.useInjection=function(e){return o((function(t){return t.get(e)}))},t.useOptionalInjection=function(e,t){return void 0===t&&(t=function(){}),o((function(n){return n.isBound(e)?n.get(e):t(n)}))},t.useAllInjections=function(e){return o((function(t){return t.getAll(e)}))}},838:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInstanceAdministration=t.getClassAdministration=t.createProperty=t.ensureAcceptContext=t.AdministrationKey=t.InversifyReactContext=void 0;var r=n(888).createContext(void 0);t.InversifyReactContext=r,r.displayName="InversifyReactContext";var i="~$inversify-react";function o(e){var t=e[i];return t||(t={accepts:!1},Object.defineProperty(e,i,{enumerable:!1,writable:!1,value:t})),t}function s(e){var t=e[i];if(!t){var n=e.context;if(!n)throw new Error("Cannot use resolve services without any providers in component tree.");t={container:n,properties:{}},Object.defineProperty(e,i,{enumerable:!1,writable:!1,value:t})}return t}t.AdministrationKey=i,t.getClassAdministration=o,t.getInstanceAdministration=s,t.ensureAcceptContext=function(e){var t=o(e);if(!t.accepts){var n=e.contextType,i=e.displayName||e.name;if(n)throw new Error("inversify-react cannot configure React context.\nComponent `"+i+"` already has `contextType: "+(n.displayName||"<anonymous context>")+"` defined.\n@see inversify-react/test/resolve.tsx#limitations for more info and workarounds\n");Object.defineProperty(e,"contextType",{enumerable:!0,get:function(){return r},set:function(e){if(e!==r)throw new Error("Cannot change `contextType` of `"+i+"` component.\nLooks like you are using inversify-react decorators, which have already patched this component and use own context to deliver IoC container.\n@see inversify-react/test/resolve.tsx#limitations for more info and workarounds\n")}}),t.accepts=!0}},t.createProperty=function(e,t,n,r){Object.defineProperty(e,t,{enumerable:!0,get:function(){var e=s(this),i=e.properties[t];if(!i){var o,a=e.container;o=r.isOptional?a.isBound(n)?a.get(n):r.defaultValue:a.get(n),i=e.properties[t]=function(){return o}}return i()}});var i=Object.getOwnPropertyDescriptor(e,t);if(!i)throw new Error("Failed to define property");return i}},713:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=void 0;var r=n(888),i=n(888),o=n(838),s=function(e){var t=e.children,n=e.container,s=e.standalone,a=void 0!==s&&s,c=i.useState(n)[0];if("resolve"in n&&n!==c)throw new Error("Changing `container` prop (swapping container in runtime) is not supported.\nIf you're rendering Provider in some list, try adding `key={container.id}` to the Provider.\nMore info on React lists:\nhttps://reactjs.org/docs/lists-and-keys.html#keys\nhttps://reactjs.org/docs/reconciliation.html#recursing-on-children");var u=i.useState(a)[0];if(a!==u)throw new Error("Changing `standalone` prop is not supported.");var l=i.useContext(o.InversifyReactContext);return i.useState((function(){if(!u&&l){if(l===c)throw new Error("Provider has found a parent container (on surrounding React Context), yet somehow it's the same as container specified in props. It doesn't make sense.\nPerhaps you meant to configure Provider as `standalone={true}`?");if(c.parent)throw new Error("Ambiguous containers hierarchy.\nProvider has found a parent for specified `container`, but it already has a parent.\nLearn more at https://github.com/Kukkimonsuta/inversify-react/blob/v0.5.0/src/provider.tsx");c.parent=l}})),r.createElement(o.InversifyReactContext.Provider,{value:c},t)};t.Provider=s,t.default=s},905:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var r=n(838);function i(e,t,n,i){return r.ensureAcceptContext(e.constructor),r.createProperty(e,t,n,i)}function o(e,t){if(!t)throw new Error("Decorator `resolve` failed to resolve property name");if(!Reflect||!Reflect.getMetadata)throw new Error("Decorator `resolve` without specifying service identifier requires `reflect-metadata`");var n=Reflect.getMetadata("design:type",e,t);if(!n)throw new Error("Failed to discover property type, is `emitDecoratorMetadata` enabled?");return n}var s=function(e,t,n){if(void 0!==t)return i(e,t,o(e,t),{});var r=e;if(!r)throw new Error("Invalid property type.");return function(e,t,n){return i(e,t,r,{})}};t.resolve=s,s.optional=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("string"==typeof e[1]&&3===e.length){var n=e[0],r=e[1];return i(n,r,(e[2],o(n,r)),{isOptional:!0})}var s=e[0],a=e[1];return function(e,t,n){return i(e,t,s,{isOptional:!0,defaultValue:a})}},t.default=s},888:e=>{e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.useOptionalInjection=e.useInjection=e.useContainer=e.useAllInjections=e.Provider=e.resolve=void 0;var t=n(905);Object.defineProperty(e,"resolve",{enumerable:!0,get:function(){return t.resolve}});var r=n(713);Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return r.Provider}});var o=n(131);Object.defineProperty(e,"useAllInjections",{enumerable:!0,get:function(){return o.useAllInjections}}),Object.defineProperty(e,"useContainer",{enumerable:!0,get:function(){return o.useContainer}}),Object.defineProperty(e,"useInjection",{enumerable:!0,get:function(){return o.useInjection}}),Object.defineProperty(e,"useOptionalInjection",{enumerable:!0,get:function(){return o.useOptionalInjection}})})(),i})())},6594:function(e,t,n){"use strict";n.r(t),n.d(t,{AsyncContainerModule:function(){return We},BindingScopeEnum:function(){return v},BindingTypeEnum:function(){return g},Container:function(){return qe},ContainerModule:function(){return $e},LazyServiceIdentifer:function(){return q},METADATA_KEY:function(){return at},MetadataReader:function(){return x},TargetTypeEnum:function(){return b},createTaggedDecorator:function(){return Ve},decorate:function(){return Ge},getServiceIdentifierAsString:function(){return O},id:function(){return _},inject:function(){return Ze},injectable:function(){return He},interfaces:function(){return it},multiBindToService:function(){return ie},multiInject:function(){return tt},named:function(){return Je},namedConstraint:function(){return Ce},optional:function(){return Xe},postConstruct:function(){return ot},preDestroy:function(){return st},tagged:function(){return ze},taggedConstraint:function(){return Se},targetName:function(){return nt},traverseAncerstors:function(){return Ee},typeConstraint:function(){return Pe},unmanaged:function(){return et}});var r={};n.r(r),n.d(r,{DESIGN_PARAM_TYPES:function(){return p},INJECT_TAG:function(){return c},MULTI_INJECT_TAG:function(){return u},NAMED_TAG:function(){return i},NAME_TAG:function(){return o},NON_CUSTOM_TAG_KEYS:function(){return y},OPTIONAL_TAG:function(){return a},PARAM_TYPES:function(){return h},POST_CONSTRUCT:function(){return f},PRE_DESTROY:function(){return m},TAGGED:function(){return l},TAGGED_PROP:function(){return d},UNMANAGED_TAG:function(){return s}});var i="named",o="name",s="unmanaged",a="optional",c="inject",u="multi_inject",l="inversify:tagged",d="inversify:tagged_props",h="inversify:paramtypes",p="design:paramtypes",f="post_construct",m="pre_destroy",y=[c,u,o,s,i,a],v={Request:"Request",Singleton:"Singleton",Transient:"Transient"},g={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},b={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},w=0;function _(){return w++}var E=function(){function e(e,t){this.id=_(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=g.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===v.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),S="Metadata key was used more than once in a parameter:",C="NULL argument",P="Key Not Found",A="Missing required @injectable annotation in:",R="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",j=function(e,t){return"onDeactivation() error in class "+e+": "+t},x=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(h,e),userGeneratedMetadata:Reflect.getMetadata(l,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(d,e)||[]},e}();function D(e){return e instanceof RangeError||"Maximum call stack size exceeded"===e.message}function O(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function T(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=I(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r}function M(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||M(e.parentRequest,t))}function k(e){e.childRequests.forEach((function(e){if(M(e,e.serviceIdentifier)){var t=function(e){return function e(t,n){void 0===n&&(n=[]);var r=O(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(e);throw new Error("Circular dependency found: "+t)}k(e)}))}function I(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}var F=function(){function e(e){this.id=_(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),B=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===i?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}(),N=function(e,t){this.parentContext=e,this.rootRequest=t},q=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}(),$=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),W=function(){function e(e,t,n,r){this.id=_(),this.type=e,this.serviceIdentifier=n;var o="symbol"==typeof t?t.toString().slice(7,-1):t;this.name=new $(o||""),this.identifier=t,this.metadata=new Array;var s=null;"string"==typeof r?s=new B(i,r):r instanceof B&&(s=r),null!==s&&this.metadata.push(s)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++)if(n[t].key===e)return!0;return!1},e.prototype.isArray=function(){return this.hasTag(u)},e.prototype.matchesArray=function(e){return this.matchesTag(u)(e)},e.prototype.isNamed=function(){return this.hasTag(i)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return y.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(a)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===i}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return y.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(i)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}(),U=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function L(e,t,n,r){var i=e.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o)throw new Error(A+" "+t+".");var s=i.userGeneratedMetadata,a=Object.keys(s),c=0===n.length&&a.length>0,u=a.length>n.length,l=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=V(s,e,t,n,r);null!==a&&o.push(a)}return o}(r,t,o,s,c||u?a.length:n.length),d=K(e,n,t);return U(U([],l,!0),d,!0)}function V(e,t,n,r,i){var o=i[e.toString()]||[],s=H(o),a=!0!==s.unmanaged,c=r[e];if((c=s.inject||s.multiInject||c)instanceof q&&(c=c.unwrap()),a){if(!t&&(c===Object||c===Function||void 0===c))throw new Error("Missing required @inject or @multiInject annotation in: argument "+e+" in class "+n+".");var u=new W(b.ConstructorArgument,s.targetName,c);return u.metadata=o,u}return null}function Y(e,t,n,r){var i=e||t;if(void 0===i){var o=A+" for property "+String(n)+" in class "+r+".";throw new Error(o)}return i}function K(e,t,n){for(var r=e.getPropertiesMetadata(t),i=[],o=Object.getOwnPropertySymbols(r),s=0,a=Object.keys(r).concat(o);s<a.length;s++){var c=a[s],u=r[c],l=H(u),d=l.targetName||c,h=Y(l.inject,l.multiInject,c,n),p=new W(b.ClassProperty,d,h);p.metadata=u,i.push(p)}var f=Object.getPrototypeOf(t.prototype).constructor;if(f!==Object){var m=K(e,f,n);i=U(U([],i,!0),m,!0)}return i}function G(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=L(e,I(n),n,!0),i=r.map((function(e){return e.metadata.filter((function(e){return e.key===s}))})),o=[].concat.apply([],i).length,a=r.length-o;return a>0?a:G(e,n)}return 0}function H(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[c],multiInject:t[u],targetName:t[o],unmanaged:t[s]}}var z=function(){function e(e,t,n,r,i){this.id=_(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();function J(e){return e._bindingDictionary}function Q(e,t,n,r,i){var o,s=X(n.container,i.serviceIdentifier);return 0===s.length&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),s=X(n.container,i.serviceIdentifier)),o=t?s:s.filter((function(e){var t=new z(e.serviceIdentifier,n,r,e,i);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case 0:if(n.isOptional())return t;var i=O(e),o="No matching bindings found for serviceIdentifier:";throw o+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e}(i,n),o+=T(r,i,X),new Error(o);case 1:return t;default:if(n.isArray())return t;throw o="Ambiguous match found for serviceIdentifier: "+(i=O(e)),o+=T(r,i,X),new Error(o)}}(i.serviceIdentifier,o,i,n.container),o}function Z(e,t,n,r,i,o){var s,a;if(null===i){s=Q(e,t,r,null,o),a=new z(n,r,null,s,o);var c=new N(r,a);r.addPlan(c)}else s=Q(e,t,r,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach((function(t){var n=null;if(o.isArray())n=a.addChildRequest(t.serviceIdentifier,t,o);else{if(t.cache)return;n=a}if(t.type===g.Instance&&null!==t.implementationType){var i=function(e,t){return L(e,I(t),t,!1)}(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var s=G(e,t.implementationType);if(i.length<s){var c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."}(I(t.implementationType));throw new Error(c)}}i.forEach((function(t){Z(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function X(e,t){var n=[],r=J(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=X(e.parent,t)),n}function ee(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function te(e){return!!ee(e)||Array.isArray(e)&&e.some(ee)}var ne,re=function(e,t){return n=void 0,r=void 0,o=function(){var n,r;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return n=i.sent(),e.cache=n,[3,3];case 2:throw r=i.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o};!function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(ne||(ne={}));var ie=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}},oe=function(){return oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oe.apply(this,arguments)},se=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},ae=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function ce(e){var t,n=new((t=e.constr).bind.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,r){var i=t.target.identifier,o=e.propertyInjections[r];n[i]=o})),n}function ue(e){return se(this,void 0,void 0,(function(){var t,n,r,i;return ae(this,(function(o){for(t=[],n=0,r=e;n<r.length;n++)i=r[n],Array.isArray(i)?t.push(Promise.all(i)):t.push(i);return[2,Promise.all(t)]}))}))}function le(e,t){var n=function(e,t){var n,r;if(Reflect.hasMetadata(f,e)){var i=Reflect.getMetadata(f,e);try{return null===(r=(n=t)[i.value])||void 0===r?void 0:r.call(n)}catch(t){throw new Error("@postConstruct error in class "+e.name+": "+t.message)}}}(e,t);return ee(n)?n.then((function(){return t})):t}var de=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&o)return r.map((function(t){return de(e)(t)}));if(!t.target.isOptional()||0!==n.length){var s=n[0];return me(e,t,s)}}},he=function(e,t){var n=function(e){switch(e.type){case g.Factory:return{factory:e.factory,factoryType:ne.Factory};case g.Provider:return{factory:e.provider,factoryType:ne.Provider};case g.DynamicValue:return{factory:e.dynamicValue,factoryType:ne.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}}(e);return function(r,i){try{return n.factory.bind(e)(t)}catch(e){throw D(e)&&(e=new Error((o=n.factoryType,s=t.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+o+"' bindings. Please investigate bindings withservice identifier '"+s+"'."))),e}var o,s}()},pe=function(e,t,n){var r,i=t.childRequests;switch(function(e){var t=null;switch(e.type){case g.ConstantValue:case g.Function:t=e.cache;break;case g.Constructor:case g.Instance:t=e.implementationType;break;case g.DynamicValue:t=e.dynamicValue;break;case g.Provider:t=e.provider;break;case g.Factory:t=e.factory}if(null===t){var n=O(e.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case g.ConstantValue:case g.Function:r=n.cache;break;case g.Constructor:r=n.implementationType;break;case g.Instance:r=function(e,t,n,r){!function(e,t){e.scope!==v.Singleton&&function(e,t){var n="Class cannot be instantiated in "+(e.scope===v.Request?"request":"transient")+" scope.";if("function"==typeof e.onDeactivation)throw new Error(j(t.name,n));if(Reflect.hasMetadata(m,t))throw new Error("@preDestroy error in class "+t.name+": "+n)}(e,t)}(e,t);var i=function(e,t,n){var r;if(t.length>0){var i=function(e,t){return e.reduce((function(e,n){var r=t(n);return n.target.type===b.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=te(r)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),o=oe(oe({},i),{constr:e});r=i.isAsync?function(e){return se(this,void 0,void 0,(function(){var t,n;return ae(this,(function(r){switch(r.label){case 0:return[4,ue(e.constructorInjections)];case 1:return t=r.sent(),[4,ue(e.propertyInjections)];case 2:return n=r.sent(),[2,ce(oe(oe({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(o):ce(o)}else r=new e;return r}(t,n,r);return ee(i)?i.then((function(e){return le(t,e)})):le(t,i)}(n,n.implementationType,i,de(e));break;default:r=he(n,t.parentContext)}return r},fe=function(e,t,n){var r=function(e,t){return t.scope===v.Singleton&&t.activated?t.cache:t.scope===v.Request&&e.has(t.id)?e.get(t.id):null}(e,t);return null!==r||function(e,t,n){t.scope===v.Singleton&&function(e,t){e.cache=t,e.activated=!0,ee(t)&&re(e,t)}(t,n),t.scope===v.Request&&function(e,t,n){e.has(t.id)||e.set(t.id,n)}(e,t,n)}(e,t,r=n()),r},me=function(e,t,n){return fe(e,n,(function(){var r=pe(e,t,n);return ee(r)?r.then((function(e){return ye(t,n,e)})):ye(t,n,r)}))};function ye(e,t,n){var r,i=ve(e.parentContext,t,n),o=_e(e.parentContext.container),s=o.next();do{r=s.value;var a=e.parentContext,c=e.serviceIdentifier,u=we(r,c);i=ee(i)?be(u,a,i):ge(u,a,i),s=o.next()}while(!0!==s.done&&!J(r).hasKey(e.serviceIdentifier));return i}var ve=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},ge=function(e,t,n){for(var r=e.next();!r.done;){if(ee(n=r.value(t,n)))return be(e,t,n);r=e.next()}return n},be=function(e,t,n){return r=void 0,i=void 0,s=function(){var r,i;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(o){switch(o.label){case 0:return[4,n];case 1:r=o.sent(),i=e.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(t,r)];case 3:return r=o.sent(),i=e.next(),[3,2];case 4:return[2,r]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,i||[])).next())}));var r,i,o,s},we=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},_e=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}},Ee=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||Ee(n,t))},Se=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new B(e,t),n}},Ce=Se(i),Pe=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},Ae=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new Re(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=Ce(e),new Re(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new Re(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=Se(e)(t),new Re(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&Pe(e)(t.parentRequest)},new Re(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&Ce(e)(t.parentRequest)},new Re(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Se(e)(t)(n.parentRequest)},new Re(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&Ee(t,Pe(e))},new Re(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!Ee(t,Pe(e))},new Re(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&Ee(t,Ce(e))},new Re(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!Ee(t,Ce(e))},new Re(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Ee(n,Se(e)(t))},new Re(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!Ee(n,Se(e)(t))},new Re(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&Ee(t,e)},new Re(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!Ee(t,e)},new Re(this._binding)},e}(),Re=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new Ae(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new Ae(this._binding)},e}(),je=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Ae(this._binding),this._bindingOnSyntax=new Re(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),xe=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=v.Request,new je(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=v.Singleton,new je(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=v.Transient,new je(this._binding)},e}(),De=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Ae(this._binding),this._bindingOnSyntax=new Re(this._binding),this._bindingInSyntax=new xe(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),Oe=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=g.Instance,this._binding.implementationType=e,new De(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=g.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=v.Singleton,new je(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=g.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new De(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=g.Constructor,this._binding.implementationType=e,this._binding.scope=v.Singleton,new je(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=g.Factory,this._binding.factory=e,this._binding.scope=v.Singleton,new je(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=g.Function,this._binding.scope=v.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=g.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=v.Singleton,new je(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=g.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new je(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=g.Provider,this._binding.provider=e,this._binding.scope=v.Singleton,new je(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),Te=function(){function e(){}return e.of=function(t,n,r,i,o){var s=new e;return s.bindings=t,s.middleware=n,s.deactivations=i,s.activations=r,s.moduleActivationStore=o,s},e}(),Me=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(C);if(null==t)throw new Error(C);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(C);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(P)},e.prototype.remove=function(e){if(null==e)throw new Error(C);if(!this._map.delete(e))throw new Error(P)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,r){var i=e.hasKey(n)?e.get(n):void 0;if(void 0!==i){var o=r.filter((function(e){return!i.some((function(t){return e===t}))}));t._setValue(n,o)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(r,i){for(var o=[],s=0,a=r;s<a.length;s++){var c=a[s];e(c)?n.push(c):o.push(c)}t._setValue(i,o)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(C);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,"object"==typeof(r=e)&&null!==r&&"clone"in r&&"function"==typeof r.clone?e.clone():e);var r}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}(),ke=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new Me,onDeactivations:new Me}},e}(),Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ie.apply(this,arguments)},Fe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Be=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ne=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},qe=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===t.defaultScope)t.defaultScope=v.Transient;else if(t.defaultScope!==v.Singleton&&t.defaultScope!==v.Transient&&t.defaultScope!==v.Request)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=_(),this._bindingDictionary=new Me,this._snapshots=[],this._middleware=null,this._activations=new Me,this._deactivations=new Me,this.parent=null,this._metadataReader=new x,this._moduleActivationStore=new ke}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new e,s=Ne([t,n],r,!0).map((function(e){return J(e)})),a=J(o);function c(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return s.forEach((function(e){c(e,a)})),o},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fe(this,void 0,void 0,(function(){var t,n,r,i,o;return Be(this,(function(s){switch(s.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],o=t(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fe(this,void 0,void 0,(function(){var t,n,r,i;return Be(this,(function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(r=n[t],i=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(i)]):[3,4];case 2:o.sent(),this._removeModuleHandlers(r.id),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||v.Transient,n=new E(e,t);return this._bindingDictionary.add(e,n),new Oe(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return Fe(this,void 0,void 0,(function(){return Be(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return Fe(this,void 0,void 0,(function(){var t;return Be(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new Me},e.prototype.unbindAllAsync=function(){return Fe(this,void 0,void 0,(function(){var e,t=this;return Be(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,r){e.push(t._deactivateSingletonsAsync(r))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new Me,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,i,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=function(e,t,n,r){var i=new W(b.Variable,"",t,new B(n,r)),o=new F(e);return new z(t,o,null,[],i)}(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(Te.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return Fe(this,void 0,void 0,(function(){var t;return Be(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var r=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(r)},e.prototype.getTaggedAsync=function(e,t,n){return Fe(this,void 0,void 0,(function(){var r;return Be(this,(function(i){return r=this._getNotAllArgs(e,!1,t,n),[2,this._get(r)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,i,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,i,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(r)},e.prototype.getAllTaggedAsync=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getAll(r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,i,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,i,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){if(Reflect.hasMetadata(m,e))return t[Reflect.getMetadata(m,e).value]()},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,r=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var i=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(ee(i))return this._handleDeactivationError(i.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)})),r)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if(ee(o))return this._handleDeactivationError(o,r)}catch(e){throw new Error(j(r.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return Fe(this,void 0,void 0,(function(){var n;return Be(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return r.sent(),[3,3];case 2:throw n=r.sent(),new Error(j(t.name,n.message));case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,r=t.next();r.value;){var i=r.value(e);if(ee(i))return i.then((function(){return n._deactivateContainerAsync(e,t)}));r=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return Fe(this,void 0,void 0,(function(){var n;return Be(this,(function(r){switch(r.label){case 0:n=t.next(),r.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return r.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind(r);return t(i,n),i}},r=function(t){return function(n,r){e._moduleActivationStore.addActivation(t,n,r),e.onActivation(n,r)}},i=function(t){return function(n,r){e._moduleActivationStore.addDeactivation(t,n,r),e.onDeactivation(n,r)}};return function(o){return{bindFunction:(s=o,function(n){var r=e.bind(n);return t(r,s),r}),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:r(o),onDeactivationFunction:i(o),rebindFunction:n(o),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}};var s}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=Ie(Ie({},e),{contextInterceptor:function(e){return e},targetType:b.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if(te(t))throw new Error("You are attempting to construct '"+e.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:r}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=function(e,t,n,r,i,o,s,a){void 0===a&&(a=!1);var l=new F(t),d=function(e,t,n,r,i,o){var s=new B(e?u:c,n),a=new W(t,"",n,s);if(void 0!==i){var l=new B(i,o);a.metadata.push(l)}return a}(n,r,i,0,o,s);try{return Z(e,a,i,l,null,d),l}catch(e){throw D(e)&&k(l.plan.rootRequest),e}}(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return function(e){return de(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n))}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return ee(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(ee(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},e.prototype._deactivateSingletonsAsync=function(e){return Fe(this,void 0,void 0,(function(){var t=this;return Be(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return Fe(this,void 0,void 0,(function(){return Be(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error("Could not unbind serviceIdentifier: "+O(e))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var r=this;if("function"==typeof e.onDeactivation){var i=e.onDeactivation(t);if(ee(i))return i.then((function(){return r._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return Fe(this,void 0,void 0,(function(){return Be(this,(function(r){switch(r.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return r.sent(),[2]}}))}))},e}(),$e=function(e){this.id=_(),this.registry=e},We=function(e){this.id=_(),this.registry=e};function Ue(e,t,n,r){!function(e){if(void 0!==e)throw new Error(R)}(t),Le(l,e,n.toString(),r)}function Le(e,t,n,r){var i=function(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var i=r[n];if(t.has(i))return i;t.add(i)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error(S+" "+n.toString())}else t=[e];return t}(r),o={};Reflect.hasOwnMetadata(e,t)&&(o=Reflect.getMetadata(e,t));var s=o[n];if(void 0===s)s=[];else for(var a=function(e){if(i.some((function(t){return t.key===e.key})))throw new Error(S+" "+e.key.toString())},c=0,u=s;c<u.length;c++)a(u[c]);s.push.apply(s,i),o[n]=s,Reflect.defineMetadata(e,o,t)}function Ve(e){return function(t,n,r){"number"==typeof r?Ue(t,n,r,e):function(e,t,n){if(void 0!==e.prototype)throw new Error(R);Le(d,e.constructor,t,n)}(t,n,e)}}function Ye(e,t){Reflect.decorate(e,t)}function Ke(e,t){return function(n,r){t(n,r,e)}}function Ge(e,t,n){"number"==typeof n?Ye([Ke(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):Ye([e],t)}function He(){return function(e){if(Reflect.hasOwnMetadata(h,e))throw new Error("Cannot apply @injectable decorator multiple times.");var t=Reflect.getMetadata(p,e)||[];return Reflect.defineMetadata(h,t,e),e}}function ze(e,t){return Ve(new B(e,t))}function Je(e){return Ve(new B(i,e))}function Qe(e){return function(t){return function(n,r,i){if(void 0===t){var o="function"==typeof n?n.name:n.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+o+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.")}return Ve(new B(e,t))(n,r,i)}}}var Ze=Qe(c);function Xe(){return Ve(new B(a,!0))}function et(){return function(e,t,n){Ue(e,t,n,new B(s,!0))}}var tt=Qe(u);function nt(e){return function(t,n,r){Ue(t,n,r,new B(o,e))}}function rt(e,t){return function(){return function(n,r){var i=new B(e,r);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,i,n.constructor)}}}var it,ot=rt(f,"Cannot apply @postConstruct decorator multiple times in the same class"),st=rt(m,"Cannot apply @preDestroy decorator multiple times in the same class");it||(it={});var at=r},3018:function(e,t,n){"use strict";n.r(t)},7576:function(e,t,n){"use strict";n.r(t)},8660:function(e,t,n){var r;!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:i=o(r.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return I(Object.create(null))}:s?function(){return I({__proto__:null})}:function(){return I({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}():Map,h=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,p=new(l||"function"!=typeof WeakMap?function(){var e=c.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+s()}while(c.has(e,t));return e[t]=!0,t}function i(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function f(e,t,n){var r=p.get(e);if(S(r)){if(!n)return;r=new d,p.set(e,r)}var i=r.get(t);if(S(i)){if(!n)return;i=new d,r.set(t,i)}return i}function m(e,t,n){if(y(e,t,n))return!0;var r=k(t);return!C(r)&&m(e,r,n)}function y(e,t,n){var r=f(t,n,!1);return!S(r)&&!!r.has(e)}function v(e,t,n){if(y(e,t,n))return g(e,t,n);var r=k(t);return C(r)?void 0:v(e,r,n)}function g(e,t,n){var r=f(t,n,!1);if(!S(r))return r.get(e)}function b(e,t,n,r){f(n,r,!0).set(e,t)}function w(e,t){var n=_(e,t),r=k(e);if(null===r)return n;var i=w(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new h,s=[],a=0,c=n;a<c.length;a++){var u=c[a];o.has(u)||(o.add(u),s.push(u))}for(var l=0,d=i;l<d.length;l++)u=d[l],o.has(u)||(o.add(u),s.push(u));return s}function _(e,t){var n=[],r=f(e,t,!1);if(S(r))return n;for(var o=function(e){var t=O(e,i);if(!x(t))throw new TypeError;var n=t.call(e);if(!P(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=T(o);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(e){try{M(o)}finally{throw e}}s++}}function E(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function S(e){return void 0===e}function C(e){return null===e}function P(e){return"object"==typeof e?null!==e:"function"==typeof e}function A(e,t){switch(E(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=O(e,r);if(void 0!==i){var o=i.call(e,n);if(P(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(x(n)&&!P(i=n.call(e)))return i;if(x(r=e.valueOf)&&!P(i=r.call(e)))return i}else{var r;if(x(r=e.valueOf)&&!P(i=r.call(e)))return i;var i,o=e.toString;if(x(o)&&!P(i=o.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}function R(e){var t=A(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function j(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function D(e){return"function"==typeof e}function O(e,t){var n=e[t];if(null!=n){if(!x(n))throw new TypeError;return n}}function T(e){var t=e.next();return!t.done&&t}function M(e){var t=e.return;t&&t.call(e)}function k(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function I(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(S(n)){if(!j(e))throw new TypeError;if(!D(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!S(r)&&!C(r)){if(!D(r))throw new TypeError;t=r}}return t}(e,t)}if(!j(e))throw new TypeError;if(!P(t))throw new TypeError;if(!P(r)&&!S(r)&&!C(r))throw new TypeError;return C(r)&&(r=void 0),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!S(o)&&!C(o)){if(!P(o))throw new TypeError;r=o}}return r}(e,t,n=R(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!P(n))throw new TypeError;if(!S(r)&&!function(e){switch(E(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!P(n))throw new TypeError;return S(r)||(r=R(r)),b(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return S(n)||(n=R(n)),m(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return S(n)||(n=R(n)),y(e,t,n)})),e("getMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return S(n)||(n=R(n)),v(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!P(t))throw new TypeError;return S(n)||(n=R(n)),g(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!P(e))throw new TypeError;return S(t)||(t=R(t)),w(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!P(e))throw new TypeError;return S(t)||(t=R(t)),_(e,t)})),e("deleteMetadata",(function(e,t,n){if(!P(t))throw new TypeError;S(n)||(n=R(n));var r=f(t,n,!1);if(S(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=p.get(t);return i.delete(n),i.size>0||p.delete(t),!0}))}(i)}()}(r||(r={}))},3726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssetSearchField=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e),this.state={keywords:null,asset:null,assets:[]},this.onKeywordsChange=this.onKeywordsChange.bind(this),this.onAssetChange=this.onAssetChange.bind(this),this.getAssetsAvailable=this.getAssetsAvailable.bind(this)}onKeywordsChange(e){if(""==e)return;let t=this.props.assets.filter((t=>t.toLowerCase().indexOf(e.toLowerCase())>=0));(null==t?void 0:t.length)>0&&(t=t.map((e=>({label:e,value:e}))),this.setState({assets:[t[0]]})),this.onAssetChange(e)}onAssetChange(e){this.setState({asset:e,keywords:e}),this.props.onChange(e)}getAssetsAvailable(){var e;return(null===(e=this.props.assets)||void 0===e?void 0:e.length)>0?this.props.assets.join(", "):"none"}render(){return r.createElement("div",{style:{marginBottom:"12px"}},r.createElement("div",{style:{height:"40px"}},r.createElement(o.ComboboxControl,{label:this.props.label,help:this.props.help,value:this.state.keywords,onChange:e=>{this.onAssetChange(e)},options:this.state.assets,onFilterValueChange:e=>{this.onKeywordsChange(e)}})))}}t.AssetSearchField=s},6311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmModal=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e),this.onRequestClose=this.onRequestClose.bind(this)}onRequestClose(){this.props.onRequestClose()}onChoice(e){this.props.onChoice(e)}render(){return r.createElement(o.Modal,{title:this.props.title,onRequestClose:this.onRequestClose},r.createElement("div",null,this.props.subtitle," "),r.createElement(o.Flex,{justify:"flex-start",style:{marginTop:"12px"}},r.createElement(o.Button,{isSecondary:!0,onClick:()=>{this.onChoice("accept")}},"Accept"),r.createElement(o.Button,{isSecondary:!0,onClick:()=>{this.onChoice("deny")}},"Deny")))}}t.ConfirmModal=s},1231:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDetailsModal=void 0;const r=n(9196),i=n(9196),o=n(7484),s=n(5609);class a extends i.Component{constructor(e){super(e),this.onRequestClose=this.onRequestClose.bind(this)}onRequestClose(){this.props.onRequestClose()}dateFormatted(e){if(e)return o(e).format("MMMM D, YYYY h:mm A")}render(){return r.createElement(s.Modal,{title:`Promise  ${this.props.promise.promise_id}`,onRequestClose:this.onRequestClose},r.createElement("div",null,r.createElement("span",null,"Source: "),r.createElement("span",null,r.createElement("strong",null,this.props.promise.source))),r.createElement("div",null,r.createElement("span",null,"Destination: "),r.createElement("span",null,r.createElement("strong",null,this.props.promise.destination))),r.createElement("div",null,r.createElement("span",null,"Asset: "),r.createElement("span",null,r.createElement("strong",null,this.props.promise.asset))),r.createElement("div",null,r.createElement("span",null,"Quantity: "),r.createElement("span",null,r.createElement("strong",null,this.props.promise.quantity))),r.createElement("div",null,r.createElement("span",null,"Ref: "),r.createElement("span",null,r.createElement("strong",null,this.props.promise.ref))),r.createElement("div",null,r.createElement("span",null,"Note: "),r.createElement("span",null,r.createElement("strong",null,this.props.promise.note))),r.createElement("div",null,r.createElement("span",null,"Created at: "),r.createElement("span",null,r.createElement("strong",null,this.dateFormatted(this.props.promise.created_at)))),r.createElement("div",null,r.createElement("span",null,"Updated at: "),r.createElement("span",null,r.createElement("strong",null,this.dateFormatted(this.props.promise.updated_at)))))}}t.PromiseDetailsModal=a},4189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseEditForm=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e),this.state={promise:{}},this.onSave=this.onSave.bind(this),this.onDelete=this.onDelete.bind(this),this.onCancel=this.onCancel.bind(this),this.state.promise={quantity:this.props.promise.quantity,expiration:null,txid:null,fingerprint:null,ref:this.props.promise.ref,note:this.props.promise.note}}onSave(){this.props.onSave(this.state.promise)}onDelete(){this.props.onDelete()}onCancel(){this.props.onCancel()}render(){return r.createElement("div",null,r.createElement("form",null,r.createElement("div",{style:{maxWidth:"320px"}},r.createElement(o.Flex,{direction:"column"},r.createElement(o.TextControl,{label:"Quantity",hint:"Amount, in satoshis",type:"number",value:this.state.promise.quantity,onChange:e=>{const t=Object.assign({},this.state.promise);t.quantity=e,this.setState({promise:t})}}),r.createElement(o.TextControl,{label:"TXID",hint:"Transaction ID of the real bitcoin transaction in-flight",value:this.state.promise.txid,onChange:e=>{const t=Object.assign({},this.state.promise);t.txid=e,this.setState({promise:t})}}),r.createElement(o.TextControl,{label:"Fingerprint",hint:"XChain transaction fingerprint of the real btc tx",value:this.state.promise.fingerprint,onChange:e=>{const t=Object.assign({},this.state.promise);t.fingerprint=e,this.setState({promise:t})}}),r.createElement(o.TextareaControl,{label:"Ref",hint:"Extra reference data",value:this.state.promise.ref,onChange:e=>{const t=Object.assign({},this.state.promise);t.ref=e,this.setState({promise:t})}}),r.createElement(o.TextareaControl,{label:"Note",hint:"Note to display to user",value:this.state.promise.note,onChange:e=>{const t=Object.assign({},this.state.promise);t.note=e,this.setState({promise:t})}})),r.createElement(o.Flex,{justify:"flex-start",style:{marginTop:"12px"}},r.createElement(o.Button,{isPrimary:!0,disabled:this.props.saving,onClick:()=>{this.onSave()}},"Save promise"),r.createElement(o.Button,{isSecondary:!0,disabled:this.props.deleting,onClick:()=>{this.onDelete()}},"Delete promise"),r.createElement(o.Button,{isTertiary:!0,disabled:this.props.deleting,onClick:()=>{this.onCancel()}},"Cancel")))))}}t.PromiseEditForm=s},3199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseList=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e),this.getPromiseSource=this.getPromiseSource.bind(this),this.sourceExists=this.sourceExists.bind(this)}onDetails(e){this.props.onDetails(e)}getPromiseSource(e){var t,n;let r=e.source;const i=null!==(t=this.props.sources[e.source])&&void 0!==t?t:null;return i&&(r=null===(n=null==i?void 0:i.address_data)||void 0===n?void 0:n.label),r}sourceExists(e){var t;return!(null===(t=this.props.sources[e.source])||void 0===t||!t)}render(){let e=Object.keys(this.props.promises).map((e=>this.props.promises[e]));return e=e.map(((e,t)=>{var n,i,s,a,c,u,l,d;return r.createElement("div",{style:{width:"100%"}},r.createElement(o.Card,{size:"extraSmall",style:{width:"100%"}},r.createElement(o.CardHeader,null,r.createElement("div",null,r.createElement("strong",null," ",e.promise_id))),r.createElement(o.CardBody,{style:{width:"100%"}},r.createElement(o.Flex,{style:{width:"100%",alignItems:"center"}},r.createElement("div",{style:{flex:1}},r.createElement("div",null,r.createElement("span",null,"Source: "),this.sourceExists(e)?r.createElement("a",{href:`/wp-admin/admin.php?page=tokenpass-source-show&source=${e.source}`},r.createElement("strong",null,this.getPromiseSource(e))):r.createElement("span",null,r.createElement("strong",null,e.source))),r.createElement("div",null,r.createElement(o.Flex,{gap:0,align:"center",justify:"flex-start"},r.createElement("span",null,"Participants: "),r.createElement(o.Dashicon,{icon:"admin-users"}),r.createElement("strong",null,r.createElement("a",{href:`/tokenpass-user/${null===(i=null===(n=null==e?void 0:e.promise_meta)||void 0===n?void 0:n.source_user)||void 0===i?void 0:i.id}`},null===(a=null===(s=null==e?void 0:e.promise_meta)||void 0===s?void 0:s.source_user)||void 0===a?void 0:a.name)),r.createElement(o.Dashicon,{style:{margin:"0 5px"},icon:"arrow-right-alt"}),r.createElement(o.Dashicon,{icon:"admin-users"}),r.createElement("strong",null,r.createElement("a",{href:`/tokenpass-user/${null===(u=null===(c=null==e?void 0:e.promise_meta)||void 0===c?void 0:c.destination_user)||void 0===u?void 0:u.id}`},null===(d=null===(l=null==e?void 0:e.promise_meta)||void 0===l?void 0:l.destination_user)||void 0===d?void 0:d.name)))),r.createElement("div",null,r.createElement("span",null,"Asset: "),r.createElement("strong",null,e.asset)),r.createElement("div",null,r.createElement("span",null,"Quantity: "),r.createElement("strong",null,e.quantity))))),r.createElement(o.CardFooter,null,r.createElement(o.Flex,{justify:"flex-start"},r.createElement(o.Button,{isSecondary:!0,isSmall:!0,onClick:()=>{this.onDetails(t)}},"Details"),r.createElement(o.Button,{isSecondary:!0,isSmall:!0,href:`/wp-admin/admin.php?page=tokenpass-promise-edit&promise=${e.promise_id}`},"Manage promise")))))})),r.createElement(o.Flex,{style:{width:"100%"},direction:"column"},e)}}t.PromiseList=s},6296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseStoreForm=void 0;const r=n(9196),i=n(9196),o=n(620),s=n(3726),a=n(5609);class c extends i.Component{constructor(e){var t;if(super(e),this.state={promise:{source:null,destination:null,asset:null,quantity:0,ref:null,note:null},source:null,sources:[]},this.onSubmit=this.onSubmit.bind(this),this.onCancel=this.onCancel.bind(this),this.onUserChange=this.onUserChange.bind(this),this.onSourceChange=this.onSourceChange.bind(this),this.getSourceOptions=this.getSourceOptions.bind(this),this.getAssetOptions=this.getAssetOptions.bind(this),this.getCurrentAsset=this.getCurrentAsset.bind(this),this.getMaxCount=this.getMaxCount.bind(this),this.isAssetValid=this.isAssetValid.bind(this),Object.keys(this.props.sources).length>0){const e=Object.keys(this.props.sources)[0];this.state.source=Object.assign({},null!==(t=this.props.sources[e])&&void 0!==t?t:null),this.state.promise.source=this.state.source.address}}onSubmit(){this.props.onSubmit(this.state.promise)}onCancel(){this.props.onCancel(this.state.promise)}onSourceChange(e){var t;const n=Object.assign({},this.state.promise);n.source=e,n.asset=null,n.quantity=0;const r=Object.assign({},null!==(t=this.props.sources[e])&&void 0!==t?t:null);this.setState({promise:n,source:null!=r?r:null})}onUserChange(e){const t=Object.assign({},this.state.promise);t.destination=e,this.setState({promise:t})}getSourceOptions(){const e=[];return Object.keys(this.props.sources).forEach((t=>{var n,r,i;const o=null!==(r=null!==(n=this.props.sources[t].address_data.label)&&void 0!==n?n:this.props.sources[t].address)&&void 0!==r?r:null;e.push({label:o,value:null!==(i=this.props.sources[t].address)&&void 0!==i?i:null})})),e}getAssetOptions(){var e,t;const n=[];if(!this.state.source)return[];const r=null===(t=null===(e=this.state.source)||void 0===e?void 0:e.address_data)||void 0===t?void 0:t.balances;return r?(Object.keys(r).forEach((e=>{let t=r[e].asset;n.push(t)})),n):[]}getCurrentAsset(){var e;if(!(null===(e=this.state.promise)||void 0===e?void 0:e.asset))return null;if(""==this.state.promise.asset)return null;let t=this.state.source.address_data.balances;return t=Object.values(t),t=t.filter((e=>e.asset===this.state.promise.asset)),0==t.length?null:t[0]}getMaxCount(){const e=this.getCurrentAsset();return console.log(e),e?e.balance:null}isAssetValid(){return!!this.getCurrentAsset()}render(){return r.createElement("form",{style:{width:"100%",maxWidth:"320px"}},r.createElement("div",{style:{marginBottom:"12px"}},r.createElement(a.SelectControl,{label:"Source",value:this.state.promise.source,options:this.getSourceOptions(),onChange:e=>{this.onSourceChange(e)},help:"Source address to use."})),r.createElement("div",null,r.createElement("label",null,"Destination",r.createElement("div",{style:{opacity:.8,marginBottom:"12px"}},"WordPress username. The user who will receive the asset."),r.createElement(o.UserSearchField,{onChange:e=>{const t=Object.assign({},this.state.promise);t.destination=e,this.setState({promise:t})}}))),r.createElement("div",null,r.createElement("label",null,"Asset",r.createElement("div",{style:{opacity:.8,marginBottom:"12px"}},"Name of the asset that will be promised."),r.createElement(s.AssetSearchField,{assets:this.getAssetOptions(),onChange:e=>{const t=Object.assign({},this.state.promise);t.asset=e,this.setState({promise:t})}}))),this.isAssetValid()&&r.createElement("div",null,r.createElement("label",null,"Quantity",r.createElement(a.Flex,{justify:"flex-start",align:"center",style:{paddingTop:"12px"}},r.createElement(a.__experimentalNumberControl,{type:"number",value:this.state.promise.quantity,style:{maxWidth:"100px"},onChange:e=>{const t=Object.assign({},this.state.promise);t.quantity=e,this.setState({promise:t})}}),r.createElement("span",null,r.createElement("span",null,"of / "),r.createElement("span",{title:this.getMaxCount()},r.createElement("strong",null,parseFloat(this.getMaxCount().toFixed(4))))))),r.createElement(a.TextControl,{label:"Ref",help:"Extra reference data",value:this.state.promise.ref,onChange:e=>{const t=Object.assign({},this.state.promise);t.ref=e,this.setState({promise:t})}}),r.createElement(a.TextareaControl,{label:"Note",help:"Note to display to user",value:this.state.promise.note,onChange:e=>{const t=Object.assign({},this.state.promise);t.note=e,this.setState({promise:t})}})),r.createElement(a.Flex,{justify:"flex-start"},r.createElement(a.Button,{isPrimary:!0,disabled:this.props.saving,onClick:()=>{this.onSubmit()},style:{marginTop:"12px"}},"Create transaction"),!0===this.props.saving&&r.createElement(a.Spinner,null),r.createElement(a.Button,{isTertiary:!0,disabled:this.props.saving,onClick:()=>{this.onCancel()},style:{marginTop:"12px"}},"Cancel")))}}t.PromiseStoreForm=c},1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SavePanel=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e)}render(){return r.createElement(o.Panel,null,r.createElement(o.PanelBody,null,r.createElement(o.PanelRow,{className:"save-button-container"},r.createElement(o.Button,{isPrimary:!0,isLarge:!0,disabled:this.props.saving,onClick:()=>{this.props.onClick()}},"Save settings"),!0===this.props.saving&&r.createElement(o.Spinner,null))))}}t.SavePanel=s},8438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceEditForm=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e),this.state={source:{address:null,assets:null}},this.onSave=this.onSave.bind(this),this.onDelete=this.onDelete.bind(this),this.state.source=Object.assign(this.state.source,this.props.sourceData)}onSave(){this.props.onSave(this.state.source)}onDelete(){this.props.onDelete()}onCancel(){this.props.onCancel()}render(){return r.createElement("div",null,r.createElement("form",null,r.createElement("div",{style:{maxWidth:"320px"}},r.createElement("div",null,r.createElement(o.TextareaControl,{label:"Whitelisted assets",help:"Comma-separated values. Assets which are allowed for promises.",value:this.state.source.assets,onChange:e=>{const t=Object.assign({},this.state.source);t.assets=e,this.setState({source:t})}})),r.createElement(o.Flex,{justify:"flex-start",style:{marginTop:"12px"}},r.createElement(o.Button,{isPrimary:!0,disabled:this.props.saving,onClick:()=>{this.onSave()}},"Save source"),r.createElement(o.Button,{isSecondary:!0,disabled:this.props.deleting,onClick:()=>{this.onDelete()}},"Delete source"),r.createElement(o.Button,{isTertiary:!0,disabled:this.props.deleting,onClick:()=>{this.onCancel()}},"Cancel")))))}}t.SourceEditForm=s},9148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceList=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e)}render(){let e=Object.keys(this.props.sourceList).map((e=>this.props.sourceList[e]));return e=e.map(((e,t)=>{var n,i,s;let a="all";return(null===(n=null==e?void 0:e.assets)||void 0===n?void 0:n.length)&&(a=null===(i=null==e?void 0:e.assets)||void 0===i?void 0:i.join(", ")),r.createElement("div",{style:{width:"100%"}},r.createElement(o.Card,{size:"extraSmall",style:{width:"100%"}},r.createElement(o.CardHeader,null,r.createElement("div",{title:e.address},r.createElement("strong",null,null===(s=e.address_data)||void 0===s?void 0:s.label))),r.createElement(o.CardBody,{style:{width:"100%"}},r.createElement(o.Flex,{style:{width:"100%",alignItems:"center"}},r.createElement("div",{style:{flex:1}},r.createElement("div",null,r.createElement("span",null,"Assets (whitelisted): "),r.createElement("strong",null,a))))),r.createElement(o.CardFooter,null,r.createElement(o.Flex,{justify:"flex-start"},r.createElement(o.Button,{isSecondary:!0,isSmall:!0,href:`/wp-admin/admin.php?page=tokenpass-source-show&source=${e.address}`},"Details"),r.createElement(o.Button,{isSecondary:!0,isSmall:!0,href:`/wp-admin/admin.php?page=tokenpass-source-edit&source=${e.address}`},"Manage source")))))})),r.createElement("div",{style:{width:"100%"}},e.length>0?r.createElement(o.Flex,{direction:"column",style:{width:"100%"}},e):r.createElement("div",{style:{opacity:.5}},"There are no registered sources"))}}t.SourceList=s},6709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceStoreForm=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e),this.state={address:null,assets:null,addressOptions:[]},this.onSubmit=this.onSubmit.bind(this),this.getCurrentAddressType=this.getCurrentAddressType.bind(this),this.getCurrentAddressAssets=this.getCurrentAddressAssets.bind(this);const t=this.props.addresses.map(((e,t)=>({label:e.label,value:t})));this.state.addressOptions=t,this.state.addressOptions.length>0&&(this.state.address=this.state.addressOptions[0].value)}onSubmit(){const e=this.props.addresses[this.state.address];if(!e)return;const t={address:e.address,type:e.type,assets:this.state.assets};this.props.onSubmit(t)}onCancel(){this.props.onCancel()}getCurrentAddressType(){var e;if(null!=this.state.address)return null===(e=this.props.addresses[this.state.address])||void 0===e?void 0:e.type}getCurrentAddressAssets(){if(null!=this.state.address){const e=this.props.addresses[this.state.address].balances.map((e=>e.name));return 0==(null==e?void 0:e.length)?"none":e.join(", ")}}getCurrentAddress(){var e;if(null!=this.state.address)return null===(e=this.props.addresses[this.state.address])||void 0===e?void 0:e.address}render(){return r.createElement("form",{style:{width:"100%",maxWidth:"400px"}},r.createElement("div",null,r.createElement(o.SelectControl,{label:"Address",value:this.state.address,style:{width:"100%"},options:this.state.addressOptions,help:" Blockchain wallet address",onChange:e=>{this.setState({address:e})}}),null!=this.state.address&&r.createElement("div",null,r.createElement("div",{style:{margin:"10px 0"}},r.createElement("div",null,"Address info:"),r.createElement("div",null,r.createElement("strong",null,"Type: "),r.createElement("span",null,this.getCurrentAddressType())),r.createElement("div",null,r.createElement("strong",null,"Address: "),r.createElement("span",null,this.getCurrentAddress()))),r.createElement(o.TextareaControl,{label:"Whitelisted assets",help:"Comma-separated values. Leaving empty will make all assets whitelisted. Only whitelisted assets can be promised.",value:this.state.assets,onChange:e=>{this.setState({assets:e})}})),r.createElement(o.Flex,{style:{marginTop:"12px"},justify:"flex-start"},r.createElement(o.Button,{isPrimary:!0,disabled:null===this.state.address,onClick:()=>{this.onSubmit()}},"Register source"),!0===this.props.saving&&r.createElement(o.Spinner,null),r.createElement(o.Button,{isTertiary:!0,disabled:this.props.saving,onClick:()=>{this.onCancel()}},"Cancel"),!0===this.props.saving&&r.createElement(o.Spinner,null))))}}t.SourceStoreForm=s},620:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.UserSearchField=void 0;const o=n(5659),s=n(9196),a=n(9196),c=n(4251),{__:__}=wp.i18n,u=n(5609);class l extends a.Component{constructor(e){super(e),this.state={keywords:null,user:null,users:[]},this.onKeywordsChange=this.onKeywordsChange.bind(this),this.onUserChange=this.onUserChange.bind(this)}onKeywordsChange(e){""!=e&&(this.setState({keywords:e}),this.userRepository.index({suggestions:!0,name:e}).then((e=>{if(e.length<=0)return;const t=e.map((e=>({value:e.id,label:e.name})));this.setState({users:[t[0]]})})).catch((e=>{console.log(e)})))}onUserChange(e){this.setState({user:e}),this.props.onChange(e)}render(){return s.createElement("div",{style:{height:"40px"}},s.createElement(u.ComboboxControl,{label:this.props.label,help:this.props.help,value:this.state.user,onChange:e=>{this.onUserChange(e)},options:this.state.users,onFilterValueChange:e=>{this.onKeywordsChange(e)}}))}}r([(0,o.resolve)(c.TYPES.UserRepositoryInterface),i("design:type",Object)],l.prototype,"userRepository",void 0),t.UserSearchField=l},7397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Whitelist=void 0;const r=n(9196),i=n(9196),o=n(5609);class s extends i.Component{constructor(e){super(e),this.state={whitelist:[]},this.onUpdate=e.onUpdate,this.state.whitelist=Object.assign([],e.whitelist)}onUpdate(e){}onAdd(){let e=Object.assign({},this.state);e.whitelist[e.whitelist.length]={address:"",index:""},this.setState(e),this.dispatchUpdate()}onRemove(e){let t=Object.assign({},this.state);delete t.whitelist[e],this.setState(t),this.dispatchUpdate()}dispatchUpdate(){this.onUpdate(this.state.whitelist)}render(){const e=this.state.whitelist.map(((e,t)=>r.createElement("div",null,r.createElement(o.Flex,{style:{alignItems:"flex-end",margin:"8px 0"}},r.createElement(o.TextControl,{label:"Contract Address",value:e.address,onChange:e=>{let n=Object.assign({},this.state);n.whitelist[t].address=e,this.setState(Object.assign({},n)),this.dispatchUpdate()}}),r.createElement(o.TextControl,{label:"Token Index",value:e.index,onChange:e=>{let n=Object.assign({},this.state);n.whitelist[t].index=e,this.setState(Object.assign({},n)),this.dispatchUpdate()}}),r.createElement(o.Button,{isTertiary:!0,onClick:()=>{this.onRemove(t)}},r.createElement(o.Dashicon,{icon:"no"}))))));return r.createElement("div",null,r.createElement("ul",null,e),r.createElement(o.Button,{isSecondary:!0,isLarge:!0,onClick:()=>{this.onAdd()}},"Add Token"))}}t.Whitelist=s},2623:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(9196),u=n(4251),l=n(5609);class d extends c.Component{constructor(e){super(e),console.log(this.props.pageData)}getStatusText(){var e;let t="Not connected";return!0===(null===(e=this.props.pageData)||void 0===e?void 0:e.status)&&(t="Connected"),t}render(){var e,t,n,r;return s.createElement(a.default,{title:"Connection"},s.createElement(l.Panel,{header:"Connection Status"},s.createElement(l.PanelBody,null,s.createElement(l.PanelRow,null,s.createElement("div",null,s.createElement("div",null,s.createElement("span",null,"Status: "),s.createElement("span",null,s.createElement("strong",{style:{color:this.props.pageData.status?"green":"grey"}},this.getStatusText()))),1==this.props.pageData.status&&s.createElement("div",null,s.createElement("span",null,"Connected as: "),s.createElement("span",null,s.createElement("strong",null,`${null===(t=null===(e=this.props.pageData)||void 0===e?void 0:e.user)||void 0===t?void 0:t.name} (${null===(r=null===(n=this.props.pageData)||void 0===n?void 0:n.user)||void 0===r?void 0:r.username})`))))),s.createElement(l.PanelRow,null,s.createElement(l.Flex,{justify:"flex-start"},s.createElement(l.Button,{isPrimary:!0,disabled:this.props.pageData.status,onClick:()=>{this.authService.connect()}},"Connect to Tokenpass"),s.createElement(l.Button,{isPrimary:!0,disabled:!this.props.pageData.status,onClick:()=>{this.authService.disconnect()}},"Disconnect from Tokenpass"))))))}}r([(0,o.resolve)(u.TYPES.AuthServiceInterface),i("design:type",Object)],d.prototype,"authService",void 0),t.default=d},9113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9196),i=n(1780),o=n(9196),s=n(5609);class a extends o.Component{constructor(e){super(e),this.state={cards:[{title:"Main Dashboard",description:"Tokenpass main dashboard (external).",icon:"dashboard",url:"https://tokenpass.tokenly.com/dashboard",admin:!1},{title:"Inventory",description:"View the list of currently owned token assets.",icon:"money",url:"/tokenpass-user/me",admin:!1},{title:"Connection",description:"Connect or disconnect to Tokenpass network.",icon:"admin-plugins",url:"/wp-admin/admin.php?page=tokenpass-connection",admin:!1},{title:"Vendor",description:"Manage token promises.",icon:"share",url:"/wp-admin/admin.php?page=tokenpass-vendor",admin:!0},{title:"Whitelist",description:"Configure a filter for tokens displayed on the inventory pages.",icon:"forms",url:"/wp-admin/admin.php?page=tokenpass-whitelist",admin:!0},{title:"Token Meta",description:"Manage additional information for tokens, displayed on the Inventory page.",icon:"media-default",url:"/wp-admin/edit.php?post_type=token-meta",admin:!0},{title:"Settings",description:"Manage plugin settings.",icon:"admin-settings",url:"/wp-admin/admin.php?page=tokenpass-settings",admin:!0}]},this.canView=this.canView.bind(this)}canView(e){if(!0===this.props.pageData.is_admin||!1===e.admin)return!0}render(){const e=this.state.cards.map(((e,t)=>{if(!0===this.canView(e))return r.createElement(s.Card,null,r.createElement(s.CardHeader,{style:{display:"flex",justifyContent:"flex-start"}},r.createElement(s.Dashicon,{icon:e.icon}),r.createElement("h3",null,e.title)),r.createElement(s.CardBody,{size:"large"},e.description),r.createElement(s.CardFooter,null,r.createElement(s.Button,{isPrimary:!0,href:e.url},"Visit page")))}));return r.createElement(i.default,{title:"Tokenpass Dashboard"},r.createElement("div",{className:"dashboard-card-grid"},e))}}t.default=a},1780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9196),i=n(9196),o=n(9307);class s extends i.Component{constructor(e){super(e),this.state={}}render(){return r.createElement(o.Fragment,null,r.createElement("h2",null,this.props.title),this.props.children)}}t.default=s},7359:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(9196),u=n(4189),l=n(954),d=n(4251),h=n(5609);class p extends c.Component{constructor(e){super(e),this.state={saving:!1,deleting:!1},this.onSave=this.onSave.bind(this),this.onDelete=this.onDelete.bind(this),this.deletePromise=this.deletePromise.bind(this),this.onConfirmModalChoice=this.onConfirmModalChoice.bind(this),this.onCancel=this.onCancel.bind(this)}return(){window.location="/wp-admin/admin.php?page=tokenpass-vendor"}onSave(e){this.setState({saving:!0}),this.promiseRepository.update(this.props.pageData.promise.promise_id,e).then((e=>{this.setState({saving:!1}),this.return()}))}onDelete(){l.default.dispatch("confirmModalShow",{key:"promiseDelete",title:"Deleting promise",subtitle:"Are you sure you want to delete the promise?"})}deletePromise(){this.setState({deleting:!0}),this.promiseRepository.destroy(this.props.pageData.promise.promise_id).then((e=>{this.setState({deleting:!1}),this.return()}))}onConfirmModalChoice(e){"promiseDelete"===e.key&&"accept"==e.choice&&this.deletePromise()}componentDidMount(){l.default.on("confirmModalChoice",this.onConfirmModalChoice)}componentWillUnmount(){l.default.remove("confirmModalChoice",this.onConfirmModalChoice)}onCancel(){this.return()}render(){return s.createElement(a.default,{title:"Manage promise"},s.createElement("div",{style:{marginBottom:"8px"}},s.createElement("a",{style:{display:"inline-block"},href:"/wp-admin/admin.php?page=tokenpass-vendor"},"Back to vendor"),s.createElement("div",null,s.createElement("span",null,"Promise ID: "),s.createElement("strong",null,this.props.pageData.promise.promise_id))),s.createElement(h.Panel,null,s.createElement(h.PanelBody,null,s.createElement(h.PanelRow,null,s.createElement("div",null,s.createElement(u.PromiseEditForm,{onSave:this.onSave,onDelete:this.onDelete,onCancel:this.onCancel,saving:this.state.saving,deleting:this.state.deleting,promise:this.props.pageData.promise}))))))}}r([(0,o.resolve)(d.TYPES.PromiseRepositoryInterface),i("design:type",Object)],p.prototype,"promiseRepository",void 0),t.default=p},911:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(9196),u=n(6296),l=n(4251),d=n(5609);class h extends c.Component{constructor(e){super(e),this.state={promiseData:[],isCreatePromiseModalOpen:!1,storingPromise:!1},this.onSubmit=this.onSubmit.bind(this),this.onCancel=this.onCancel.bind(this)}return(){window.location="/wp-admin/admin.php?page=tokenpass-vendor"}onSubmit(e){this.promiseRepository.store(e).then((e=>{this.return()}))}onCancel(){this.return()}render(){return s.createElement(a.default,{title:"Create a token promise"},s.createElement("div",{style:{marginBottom:"8px"}},s.createElement("a",{style:{display:"inline-block"},href:"/wp-admin/admin.php?page=tokenpass-vendor"},"Back to vendor")),s.createElement(d.Panel,null,s.createElement(d.PanelBody,null,s.createElement(d.PanelRow,null,s.createElement(u.PromiseStoreForm,{onSubmit:this.onSubmit,onCancel:this.onCancel,saving:this.state.storingPromise,style:{marginBottom:"12px"},sources:this.props.pageData.sources})))))}}r([(0,o.resolve)(l.TYPES.PromiseRepositoryInterface),i("design:type",Object)],h.prototype,"promiseRepository",void 0),t.default=h},5815:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(9196),u=n(1744),l=n(4251),d=n(5609);class h extends c.Component{constructor(e){super(e),this.state={settingsData:{client_id:"",client_secret:""},saving:!1},this.onSave=this.onSave.bind(this),this.state.settingsData=Object.assign(this.state.settingsData,this.props.pageData.settings_data)}setClientId(e){let t=Object.assign({},this.state);t.settingsData.client_id=e,this.setState(t)}setClientSecret(e){let t=Object.assign({},this.state);t.settingsData.client_secret=e,this.setState(t)}onSave(){this.setState({saving:!0}),this.settingsRepository.update(this.state.settingsData).then((e=>{this.setState({saving:!1})})).catch((e=>{console.log(e)}))}render(){var e,t;return s.createElement(a.default,{title:"Tokenpass Settings"},s.createElement(d.Panel,{header:"How to Setup"},s.createElement(d.PanelBody,null,s.createElement(d.PanelRow,null,s.createElement("ul",{className:"tk_steps"},s.createElement("li",null,"1. Add a new application on ",s.createElement("a",{href:"https://tokenpass.tokenly.com/auth/apps",target:"_blank"},"Tokenpass Developers")),s.createElement("li",null,"2. Use the details bellow to add the app."))),s.createElement(d.PanelRow,null,s.createElement("div",{className:"tk_app_details"},s.createElement("h3",null,"Register Client Application"),s.createElement("span",null," ",s.createElement("b",null,"CLIENT NAME: ")," Random Input "),s.createElement("br",null),s.createElement("span",null," ",s.createElement("b",null,"APP HOMEPAGE URL: ")," ",s.createElement("a",{href:this.props.pageData.app_homepage_url,target:"_blank"},this.props.pageData.app_homepage_url)," "),s.createElement("br",null),s.createElement("span",null," ",s.createElement("b",null,"CLIENT AUTHORIZATION REDIRECT URL: ")," ",s.createElement("a",{href:this.props.pageData.client_auth_url,target:"_blank"},this.props.pageData.client_auth_url)," "))),s.createElement(d.PanelRow,null,s.createElement(d.Flex,{direction:"column",style:{flex:"1",maxWidth:"468px",marginTop:"12px"}},s.createElement(d.TextControl,{label:"Client ID",value:null!==(e=this.state.settingsData.client_id)&&void 0!==e?e:"",onChange:e=>{this.setClientId(e)}}),s.createElement(d.TextControl,{label:"Client Secret",value:null!==(t=this.state.settingsData.client_secret)&&void 0!==t?t:"",onChange:e=>{this.setClientSecret(e)}}))))),s.createElement(u.SavePanel,{saving:this.state.saving,onClick:this.onSave}))}}r([(0,o.resolve)(l.TYPES.SettingsRepositoryInterface),i("design:type",Object)],h.prototype,"settingsRepository",void 0),t.default=h},9044:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(9196),u=n(8438),l=n(954),d=n(4251),h=n(5609);class p extends c.Component{constructor(e){super(e),this.state={saving:!1,deleting:!1},this.onSave=this.onSave.bind(this),this.onDelete=this.onDelete.bind(this),this.onCancel=this.onCancel.bind(this),this.deleteSource=this.deleteSource.bind(this),this.onConfirmModalChoice=this.onConfirmModalChoice.bind(this)}return(){window.location="/wp-admin/admin.php?page=tokenpass-source-index"}onSave(e){this.setState({saving:!0}),this.sourceRepository.update(this.props.pageData.source.address,e).then((e=>{this.setState({saving:!1}),this.return()}))}onDelete(){l.default.dispatch("confirmModalShow",{key:"sourceDelete",title:"Deleting source",subtitle:"Are you sure you want to delete the source?"})}onCancel(){this.return()}deleteSource(){this.setState({deleting:!0}),this.sourceRepository.destroy(this.props.pageData.source.address).then((e=>{this.setState({deleting:!1}),this.return()}))}onConfirmModalChoice(e){"sourceDelete"===e.key&&"accept"==e.choice&&this.deleteSource()}componentDidMount(){l.default.on("confirmModalChoice",this.onConfirmModalChoice)}componentWillUnmount(){l.default.remove("confirmModalChoice",this.onConfirmModalChoice)}render(){var e,t;const n=Object.assign({},this.props.pageData.source);return(null===(e=null==n?void 0:n.assets)||void 0===e?void 0:e.length)&&(n.assets=n.assets.join(", ")),s.createElement(a.default,{title:"Manage source"},s.createElement("div",{style:{marginBottom:"8px"}},s.createElement("a",{style:{display:"inline-block"},href:"/wp-admin/admin.php?page=tokenpass-source-index"},"Back to source list")),s.createElement(h.Panel,null,s.createElement(h.PanelBody,null,s.createElement(h.PanelRow,null,s.createElement("div",null,s.createElement("div",null,s.createElement("span",null,"Source: "),s.createElement("strong",null,s.createElement("a",{style:{display:"inline-block",marginBottom:"12px"},href:`/wp-admin/admin.php?page=tokenpass-source-show&source=${n.address}`},null===(t=null==n?void 0:n.address_data)||void 0===t?void 0:t.label))),s.createElement("div",null,s.createElement(u.SourceEditForm,{onSave:this.onSave,onDelete:this.onDelete,onCancel:this.onCancel,saving:this.state.saving,deleting:this.state.deleting,sourceData:n})))))))}}r([(0,o.resolve)(d.TYPES.SourceRepositoryInterface),i("design:type",Object)],p.prototype,"sourceRepository",void 0),t.default=p},1544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9196),i=n(1780),o=n(9196),s=n(9148),a=n(5609);class c extends o.Component{constructor(e){super(e),this.state={sourceData:[],storingPromise:!1},console.log(this.props.pageData.sources)}render(){return r.createElement(i.default,{title:"Sources"},r.createElement("div",{style:{marginBottom:"8px"}},r.createElement("a",{style:{display:"inline-block"},href:"/wp-admin/admin.php?page=tokenpass-vendor"},"Back to vendor")),r.createElement(a.Panel,null,r.createElement(a.PanelBody,null,r.createElement(a.PanelRow,null,r.createElement(a.Flex,{style:{width:"100%"}},r.createElement(a.Button,{isPrimary:!0,href:"/wp-admin/admin.php?page=tokenpass-source-store"},"Register source"))))),r.createElement(a.Panel,{header:"Registered sources"},r.createElement(a.PanelBody,null,r.createElement(a.PanelRow,null,r.createElement(s.SourceList,{sourceList:this.props.pageData.sources})))))}}t.default=c},6959:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9196),i=n(1780),o=n(9196),s=n(5609);class a extends o.Component{constructor(e){super(e),this.state={},this.getAssetNames=this.getAssetNames.bind(this),console.log(this.props.pageData)}getAssetNames(){var e,t,n;let r=null===(n=null===(t=null===(e=this.props.pageData)||void 0===e?void 0:e.source)||void 0===t?void 0:t.address_data)||void 0===n?void 0:n.balances;if(!r)return;let i=[];return Object.keys(r).map(((e,t)=>{i.push(r[e].asset)})),i=i.join(", "),i}render(){var e;return r.createElement(i.default,{title:"Source details"},r.createElement("div",{style:{marginBottom:"8px"}},r.createElement("a",{style:{display:"inline-block"},href:"/wp-admin/admin.php?page=tokenpass-vendor"},"Back to vendor")),r.createElement(s.Panel,{header:this.props.pageData.source.address_data.label},r.createElement(s.PanelBody,null,r.createElement(s.PanelRow,null,r.createElement(s.Flex,{style:{width:"100%",alignItems:"center"}},r.createElement("div",{style:{flex:1}},r.createElement("div",null,r.createElement("span",null,"Type: "),r.createElement("strong",null,this.props.pageData.source.type)),r.createElement("div",null,r.createElement("span",null,"Address: "),r.createElement("strong",null,this.props.pageData.source.address)),r.createElement("div",null,r.createElement("span",null,"Assets (whitelisted): "),r.createElement("strong",null,null!==(e=this.props.pageData.source.assets)&&void 0!==e?e:"all"))))))),r.createElement(s.Panel,null,r.createElement(s.PanelBody,null,r.createElement(s.PanelRow,null,r.createElement(s.Flex,{style:{width:"100%"}},r.createElement(s.Button,{isSecondary:!0,isLarge:!0,href:`/wp-admin/admin.php?page=tokenpass-source-edit&source=${this.props.pageData.source.address}`},"Manage source"))))))}}t.default=a},9383:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(9196),u=n(6709),l=n(4251),d=n(5609);class h extends c.Component{constructor(e){super(e),this.state={storingSource:!1},console.log(this.props.pageData),this.onSubmit=this.onSubmit.bind(this)}return(){window.location="/wp-admin/admin.php?page=tokenpass-source-index"}onSubmit(e){this.sourceRepository.store(e).then((e=>{this.return()}))}render(){return s.createElement(a.default,{title:"Register source address"},s.createElement("div",{style:{marginBottom:"8px"}},s.createElement("a",{href:"/wp-admin/admin.php?page=tokenpass-source-index"},"Back to source address list")),s.createElement(d.Panel,null,s.createElement(d.PanelBody,null,s.createElement(d.PanelRow,null,s.createElement(u.SourceStoreForm,{onSubmit:this.onSubmit,onCancel:this.return,saving:this.state.storingSource,style:{marginBottom:"12px"},addresses:this.props.pageData.addresses})))))}}r([(0,o.resolve)(l.TYPES.SourceRepositoryInterface),i("design:type",Object)],h.prototype,"sourceRepository",void 0),t.default=h},335:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(9196),c=n(4251),u=n(5609),l=n(9307);class d extends a.Component{constructor(e){super(e),this.state={storingSource:!1,meta:{},postId:null};const t=new URLSearchParams(window.location.search),n=parseInt(t.get("post"));this.state.postId=n,this.state.meta=Object.assign(this.state.meta,this.props.pageData.meta)}render(){return s.createElement(l.Fragment,null,s.createElement(u.Panel,{header:"Additional token meta"},s.createElement(u.PanelBody,null,s.createElement(u.PanelRow,null,s.createElement("div",{style:{width:"100%"}},s.createElement(u.TextControl,{value:this.state.meta.asset,label:"Asset",help:"Is used for pairing meta with an asset",onChange:e=>{const t=Object.assign({},this.state.meta);t.asset=e,this.setState({meta:t})},style:{width:"100%",maxWidth:"500px",marginBottom:"8px"}}))))),s.createElement("input",{type:"hidden",name:"tokenly_data",value:JSON.stringify(this.state.meta)}))}}r([(0,o.resolve)(c.TYPES.TokenMetaRepositoryInterface),i("design:type",Object)],d.prototype,"tokenMetaRepository",void 0),t.default=d},2283:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(9196),u=n(3199),l=n(1231),d=n(4251),h=n(5609);class p extends c.Component{constructor(e){super(e),this.state={promiseData:[],isPromiseDetailsModalOpen:!1,storingPromise:!1,currentPromise:0},this.onDetails=this.onDetails.bind(this),this.onDetailsModalRequestClose=this.onDetailsModalRequestClose.bind(this),console.log(this.props.pageData)}onDetailsModalRequestClose(){this.setState({isPromiseDetailsModalOpen:!1})}onDetails(e){this.setState({currentPromise:e,isPromiseDetailsModalOpen:!0})}render(){var e,t;return s.createElement(a.default,{title:"Tokenpass Vendor"},this.state.isPromiseDetailsModalOpen&&s.createElement(l.PromiseDetailsModal,{onRequestClose:this.onDetailsModalRequestClose,promise:this.props.pageData.promises[this.state.currentPromise]}),s.createElement(h.Panel,{header:"Vendor actions"},s.createElement(h.PanelBody,null,s.createElement(h.PanelRow,null,s.createElement(h.Flex,{justify:"flex-start"},s.createElement(h.Button,{isPrimary:!0,isLarge:!0,href:"/wp-admin/admin.php?page=tokenpass-promise-store",style:{marginRight:"8px"}},"Create a promise"),s.createElement(h.Button,{isSecondary:!0,isLarge:!0,href:"/wp-admin/admin.php?page=tokenpass-source-index"},"Manage source addresses"))))),s.createElement(h.Panel,{header:"Current promises"},s.createElement(h.PanelBody,null,s.createElement(h.PanelRow,null,(null===(t=null===(e=this.props.pageData)||void 0===e?void 0:e.promises)||void 0===t?void 0:t.length)>0?s.createElement(u.PromiseList,{promises:this.props.pageData.promises,onDetails:this.onDetails,sources:this.props.pageData.sources}):s.createElement("div",{style:{opacity:.5}},"There are no registered promises")))))}}r([(0,o.resolve)(d.TYPES.PromiseRepositoryInterface),i("design:type",Object)],p.prototype,"promiseRepository",void 0),t.default=p},9865:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5659),s=n(9196),a=n(1780),c=n(7397),u=n(1744),l=n(9196),d=n(4251),h=n(5609);class p extends l.Component{constructor(e){super(e),this.state={whitelistData:{enabled:!1,items:[{address:"",index:""}]},saving:!1},this.onSave=this.onSave.bind(this),this.onWhitelistChange=this.onWhitelistChange.bind(this),this.setUseWhitelist=this.setUseWhitelist.bind(this),this.state.whitelistData=Object.assign(this.state.whitelistData,this.props.pageData.whitelist)}onWhitelistChange(e){let t=Object.assign({},this.state);t.whitelistData.items=Object.assign([],e),t.whitelistData.items=t.whitelistData.items.filter((function(e){return null!=e})),this.setState(Object.assign({},t))}setUseWhitelist(e){let t=Object.assign({},this.state);t.whitelistData.enabled=e,this.setState(t)}onSave(){this.setState({saving:!0}),this.whitelistRepository.update(this.state.whitelistData).then((e=>{this.setState({saving:!1})})).catch((e=>{console.log(e)}))}render(){return s.createElement(a.default,{title:"Token Whitelist"},s.createElement(h.Panel,{header:"Token Whitelist Settings"},s.createElement(h.PanelBody,null,s.createElement(h.PanelRow,null,s.createElement("p",null,"Whitelist allows to control which assets to display on the Inventory screen.")),s.createElement(h.PanelRow,null,s.createElement(h.ToggleControl,{label:"Use whitelist",help:this.state.whitelistData.enabled?"Whitelist enabled.":"Whitelist disabled.",checked:this.state.whitelistData.enabled,onChange:e=>{this.setUseWhitelist(e)}})))),1==this.state.whitelistData.enabled&&s.createElement(h.Panel,{header:"Token Whitelist Editor"},s.createElement(h.PanelBody,null,s.createElement(h.PanelRow,null,s.createElement(c.Whitelist,{onUpdate:this.onWhitelistChange,whitelist:this.state.whitelistData.items})))),s.createElement(u.SavePanel,{saving:this.state.saving,onClick:this.onSave}))}}r([(0,o.resolve)(d.TYPES.WhitelistRepositoryInterface),i("design:type",Object)],p.prototype,"whitelistRepository",void 0),t.default=p},486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2433);n(7576);const i=n(4251);t.default=class{constructor(){this.container=r.container,this.registerProviders()}get providers(){return[i.TYPES.ComponentServiceProviderInterface]}registerProviders(){this.providers.forEach((e=>{this.container.get(e).register()}))}}},3103:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonLoginComponent=void 0;const s=n(6594),a=n(4251),c=n(1521);let u=class extends c.Component{constructor(e){super(),this.authService=e}register(e){this.element.addEventListener("click",(()=>{this.authService.connect()}))}};u=r([(0,s.injectable)(),o(0,(0,s.inject)(a.TYPES.AuthServiceInterface)),i("design:paramtypes",[Object])],u),t.ButtonLoginComponent=u},1521:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;const o=n(6594);let s=class{constructor(){}register(e){}};s=r([(0,o.injectable)(),i("design:paramtypes",[])],s),t.Component=s},954:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={on(e,t){document.addEventListener(e,(e=>t(e.detail)))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}};t.default=n},2433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container=void 0,n(8660);const r=n(6594),i=n(4251),o=n(2952),s=n(6694),a=n(4190),c=n(5400),u=n(7129),l=n(8396),d=n(1007),h=n(8334),p=n(3103),f=n(6299),m=new r.Container;t.container=m,m.bind(i.TYPES.AuthServiceInterface).to(o.AuthService),m.bind(i.TYPES.AdminApiServiceInterface).to(f.AdminApiService),m.bind(i.TYPES.PromiseRepositoryInterface).to(a.PromiseRepository),m.bind(i.TYPES.SettingsRepositoryInterface).to(s.SettingsRepository),m.bind(i.TYPES.SourceRepositoryInterface).to(u.SourceRepository),m.bind(i.TYPES.TokenMetaRepositoryInterface).to(d.TokenMetaRepository),m.bind(i.TYPES.UserRepositoryInterface).to(c.UserRepository),m.bind(i.TYPES.WhitelistRepositoryInterface).to(l.WhitelistRepository),m.bind(i.TYPES.ComponentServiceProviderInterface).to(h.ComponentServiceProvider),m.bind(i.TYPES.ButtonLoginComponentInterface).to(p.ButtonLoginComponent),m.bind("Component").to(p.ButtonLoginComponent).whenTargetNamed("buttonLoginComponent"),m.bind("Factory<Component>").toAutoNamedFactory("Component")},6187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9196),i=n(9196),o=n(6311),s=n(954),a=n(9307);class c extends i.Component{constructor(e){super(e),this.state={confirmModalData:null,confirmModalShow:!1},this.onConfirmModalShow=this.onConfirmModalShow.bind(this),this.onConfirmModalRequestClose=this.onConfirmModalRequestClose.bind(this),this.onConfirmModalChoice=this.onConfirmModalChoice.bind(this)}onConfirmModalRequestClose(){this.setState({confirmModalData:null,confirmModalShow:!1})}onConfirmModalChoice(e){var t,n;s.default.dispatch("confirmModalChoice",{key:null===(n=null===(t=this.state)||void 0===t?void 0:t.confirmModalData)||void 0===n?void 0:n.key,choice:e}),this.onConfirmModalRequestClose()}onConfirmModalShow(e){this.setState({confirmModalData:e,confirmModalShow:!0})}componentDidMount(){s.default.on("confirmModalShow",this.onConfirmModalShow)}componentWillUnmount(){s.default.remove("confirmModalShow",this.onConfirmModalShow)}render(){return r.createElement(a.Fragment,null,1==this.state.confirmModalShow&&r.createElement(o.ConfirmModal,{key:this.state.confirmModalData.key,title:this.state.confirmModalData.title,subtitle:this.state.confirmModalData.subtitle,onRequestClose:this.onConfirmModalRequestClose,onChoice:this.onConfirmModalChoice}),this.props.children)}}t.default=c},8334:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentServiceProvider=void 0;const s=n(6594),a=n(5984);let c=class extends a.ServiceProvider{constructor(e){super(),this.componentFactory=e}get components(){return[{name:"buttonLoginComponent",selector:"button.tokenpass-login"}]}register(){this.components.forEach((e=>{document.querySelectorAll(e.selector).forEach((t=>{const n=this.componentFactory(e.name);n.element=t,n.register()}))}))}};c=r([(0,s.injectable)(),o(0,(0,s.inject)("Factory<Component>")),i("design:paramtypes",[Function])],c),t.ComponentServiceProvider=c},5984:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceProvider=void 0;const o=n(6594);let s=class{constructor(){}register(){}};s=r([(0,o.injectable)(),i("design:paramtypes",[])],s),t.ServiceProvider=s},4190:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseRepository=void 0;const s=n(6594),a=n(4251);let c=class{constructor(e){this.adminApiService=e}index(){return new Promise(((e,t)=>{this.adminApiService.promiseIndex().then((t=>{e(t)})).catch((e=>{t(e)}))}))}store(e){return new Promise(((t,n)=>{this.adminApiService.promiseStore(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}update(e,t){return new Promise(((n,r)=>{this.adminApiService.promiseUpdate(e,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}destroy(e){return new Promise(((t,n)=>{this.adminApiService.promiseDestroy(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}};c=r([(0,s.injectable)(),o(0,(0,s.inject)(a.TYPES.AdminApiServiceInterface)),i("design:paramtypes",[Object])],c),t.PromiseRepository=c},6694:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsRepository=void 0;const s=n(6594),a=n(4251);let c=class{constructor(e){this.adminApiService=e}show(){return new Promise(((e,t)=>{this.adminApiService.settingsShow().then((t=>{e(t)})).catch((e=>{t(e)}))}))}update(e){return new Promise(((t,n)=>{this.adminApiService.settingsUpdate(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}};c=r([(0,s.injectable)(),o(0,(0,s.inject)(a.TYPES.AdminApiServiceInterface)),i("design:paramtypes",[Object])],c),t.SettingsRepository=c},7129:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SourceRepository=void 0;const s=n(6594),a=n(4251);let c=class{constructor(e){this.adminApiService=e}index(){return new Promise(((e,t)=>{this.adminApiService.sourceIndex().then((t=>{e(t)})).catch((e=>{t(e)}))}))}store(e){return new Promise(((t,n)=>{this.adminApiService.sourceStore(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}update(e,t){return new Promise(((n,r)=>{this.adminApiService.sourceUpdate(e,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}destroy(e){return new Promise(((t,n)=>{this.adminApiService.sourceDestroy(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}};c=r([(0,s.injectable)(),o(0,(0,s.inject)(a.TYPES.AdminApiServiceInterface)),i("design:paramtypes",[Object])],c),t.SourceRepository=c},1007:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenMetaRepository=void 0;const s=n(6594),a=n(4251);let c=class{constructor(e){this.adminApiService=e}show(e){return new Promise(((t,n)=>{this.adminApiService.tokenMetaShow(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}update(e,t){return new Promise(((n,r)=>{this.adminApiService.tokenMetaUpdate(e,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}};c=r([(0,s.injectable)(),o(0,(0,s.inject)(a.TYPES.AdminApiServiceInterface)),i("design:paramtypes",[Object])],c),t.TokenMetaRepository=c},5400:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserRepository=void 0;const s=n(6594),a=n(4251);let c=class{constructor(e){this.adminApiService=e}index(e){return new Promise(((t,n)=>{this.adminApiService.userIndex(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}show(e,t){return new Promise(((n,r)=>{this.adminApiService.userShow(e,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}};c=r([(0,s.injectable)(),o(0,(0,s.inject)(a.TYPES.AdminApiServiceInterface)),i("design:paramtypes",[Object])],c),t.UserRepository=c},8396:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WhitelistRepository=void 0;const s=n(6594),a=n(4251);let c=class{constructor(e){this.adminApiService=e}show(){return new Promise(((e,t)=>{this.adminApiService.whitelistShow().then((t=>{e(t)})).catch((e=>{t(e)}))}))}update(e){return new Promise(((t,n)=>{this.adminApiService.whitelistUpdate(e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}};c=r([(0,s.injectable)(),o(0,(0,s.inject)(a.TYPES.AdminApiServiceInterface)),i("design:paramtypes",[Object])],c),t.WhitelistRepository=c},6299:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AdminApiService=void 0;const i=n(6594);let o=class{constructor(){this.namespace="/wp-json/tokenly/v1"}get headers(){return{"Content-type":"application/json; charset=UTF-8","X-WP-Nonce":wpApiSettings.nonce}}settingsShow(){return new Promise(((e,t)=>{this.makeRequest("GET","/settings").then((t=>{e(t)})).catch((e=>{t(e)}))}))}settingsUpdate(e){return new Promise(((t,n)=>{this.makeRequest("PUT","/settings",e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}sourceIndex(){return new Promise(((e,t)=>{this.makeRequest("GET","/source").then((t=>{e(t)})).catch((e=>{t(e)}))}))}sourceStore(e){return new Promise(((t,n)=>{this.makeRequest("POST","/source",e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}sourceUpdate(e,t){return new Promise(((n,r)=>{this.makeRequest("PUT","/source/"+e,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}sourceDestroy(e){return new Promise(((t,n)=>{this.makeRequest("DELETE","/source/"+e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}promiseIndex(){return new Promise(((e,t)=>{this.makeRequest("GET","/promise").then((t=>{e(t)})).catch((e=>{t(e)}))}))}promiseStore(e){return new Promise(((t,n)=>{this.makeRequest("POST","/promise",e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}promiseUpdate(e,t){return new Promise(((n,r)=>{this.makeRequest("PUT",`/promise/${e}`,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}promiseDestroy(e){return new Promise(((t,n)=>{this.makeRequest("DELETE",`/promise/${e}`).then((e=>{t(e)})).catch((e=>{n(e)}))}))}tokenMetaShow(e){return new Promise(((t,n)=>{this.makeRequest("GET",`/token-meta/${e}`).then((e=>{t(e)})).catch((e=>{n(e)}))}))}tokenMetaUpdate(e,t){return new Promise(((n,r)=>{this.makeRequest("PUT",`/token-meta/${e}`,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}userIndex(e){return new Promise(((t,n)=>{this.makeRequest("GET","/user",e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}userShow(e,t){return new Promise(((n,r)=>{this.makeRequest("GET",`/user/${e}`,t).then((e=>{n(e)})).catch((e=>{r(e)}))}))}whitelistShow(){return new Promise(((e,t)=>{this.makeRequest("GET","/whitelist").then((t=>{e(t)})).catch((e=>{t(e)}))}))}whitelistUpdate(e){return new Promise(((t,n)=>{this.makeRequest("PUT","/whitelist",e).then((e=>{t(e)})).catch((e=>{n(e)}))}))}makeRequest(e="",t="",n={}){return new Promise(((r,i)=>{const o={method:e,headers:this.headers};let s=`${this.namespace}${t}`;["POST","PUT","UPDATE"].includes(e)?o.body=JSON.stringify(n):s=`${s}? + ${new URLSearchParams(n)}`,fetch(s,o).then((e=>e.json())).then((e=>{r(e)})).catch((e=>i(e)))}))}};o=r([(0,i.injectable)()],o),t.AdminApiService=o},2952:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthService=void 0;const o=n(6594);let s=class{constructor(){this.namespace="/wp-json/tokenly/v1/"}get headers(){return{"Content-type":"application/json; charset=UTF-8","X-WP-Nonce":wpApiSettings.nonce}}getStatus(){return new Promise(((e,t)=>{const n={method:"GET",headers:this.headers},r=this.namespace+"authorize";fetch(r,n).then((e=>e.json())).then((t=>{e(t)})).catch((e=>t(e)))}))}connect(){return new Promise(((e,t)=>{const n={method:"POST",headers:this.headers},r=this.namespace+"authorize";fetch(r,n).then((e=>e.json())).then((e=>{var t;const n=null!==(t=e.url)&&void 0!==t?t:null;n&&(window.location=n)})).catch((e=>t(e)))}))}disconnect(){return new Promise(((e,t)=>{const n={method:"DELETE",headers:this.headers},r=this.namespace+"authorize";fetch(r,n).then((e=>e.json())).then((e=>{window.location.reload()})).catch((e=>t(e)))}))}};s=r([(0,o.injectable)(),i("design:paramtypes",[])],s),t.AuthService=s},4251:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES=void 0;const n={AuthServiceInterface:Symbol.for("AuthServiceInterface"),AdminApiServiceInterface:Symbol.for("AdminApiServiceInterface"),PromiseRepositoryInterface:Symbol.for("PromiseRepositoryInterface"),SettingsRepositoryInterface:Symbol.for("SettingsRepositoryInterface"),SourceRepositoryInterface:Symbol.for("SourceRepositoryInterface"),TokenMetaRepositoryInterface:Symbol.for("TokenMetaRepositoryInterface"),UserRepositoryInterface:Symbol.for("UserRepositoryInterface"),WhitelistRepositoryInterface:Symbol.for("WhitelistRepositoryInterface"),ComponentServiceProviderInterface:Symbol.for("ComponentServiceProviderInterface"),ButtonLoginComponentInterface:Symbol.for("ButtonLoginComponentInterface")};t.TYPES=n},9196:function(e){"use strict";e.exports=window.React},5609:function(e){"use strict";e.exports=window.wp.components},9307:function(e){"use strict";e.exports=window.wp.element}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";const e=n(2433);n(3018);const t=n(5659),r=n(9196),i=n(486),o=n(6187),s=n(5815),a=n(2283),c=n(2623),u=n(9865),l=n(911),d=n(7359),h=n(1544),p=n(6959),f=n(9383),m=n(9044),y=n(9113),v=n(335),g=n(9307);class b extends i.default{constructor(){if(super(),this.container=e.container,this.pageElement=document.querySelector(".tokenpass-admin-page"),this.pageElement){this.view=window.tokenpassView,this.pageData=window.tokenpassProps;const e=this.getViews()[this.view];this.render(e)}this.registerRedirects()}getViews(){return{settings:s.default,connection:c.default,vendor:a.default,whitelist:u.default,"promise-store":l.default,"promise-edit":d.default,"source-index":h.default,"source-show":p.default,"source-store":f.default,"source-edit":m.default,"token-meta-edit":v.default,dashboard:y.default}}render(e){if(!this.pageElement)return;const n=document.createElement("div");this.pageElement.appendChild(n),(0,g.render)(r.createElement(t.Provider,{container:this.container},r.createElement(o.default,null,r.createElement(e,{pageData:this.pageData}))),n)}registerRedirects(){document.addEventListener("DOMContentLoaded",(()=>{window.tokenpassRedirects&&window.tokenpassRedirects.forEach((e=>{const t=document.querySelector(`[href='${e.from}']`);t&&(t.href=e.to,t.target="_blank")}))}))}}new b}()}();